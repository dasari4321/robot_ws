<?xml version="1.0" ?>
<sdf version="1.6">
  <world name="my_world">
    <physics type="ode">
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1</real_time_factor>
      <ode>
        <solver>
          <type>quick</type>
          <iters>150</iters>
        </solver>
      </ode>
    </physics>

    <scene>
      <ambient>0.4 0.4 0.4 1</ambient>
      <background>0.7 0.7 0.7 1</background>
      <shadows>true</shadows>
    </scene>

    <light name="sun" type="directional">
      <cast_shadows>true</cast_shadows>
      <pose>0 0 10 0 0 0</pose>
      <direction>-0.5 0.1 -0.9</direction>
    </light>

    <model name="ground_plane">
      <static>true</static>
      <link name="link">
        <collision name="collision">
          <geometry><plane><normal>0 0 1</normal><size>100 100</size></plane></geometry>
          <surface>
            <friction><ode><mu>50</mu><mu2>50</mu2></ode></friction>
          </surface>
        </collision>
        <visual name="visual">
          <geometry><plane><normal>0 0 1</normal><size>100 100</size></plane></geometry>
          <material><ambient>0.8 0.8 0.8 1</ambient><diffuse>0.8 0.8 0.8 1</diffuse></material>
        </visual>
      </link>
    </model>

    <model name="ackermann_robot">
      <pose>0 0 0.055908 0 0 0</pose>

      <link name="base_link">
        <inertial>
          <pose>7.8263E-05 3.6651E-05 0.0068167 0 0 0</pose>
          <mass>0.080358</mass>
          <inertia>
            <ixx>9.9204E-05</ixx><ixy>3.2009E-08</ixy><ixz>1.1586E-05</ixz>
            <iyy>0.00029246</iyy><iyz>-2.9289E-08</iyz><izz>0.00036760</izz>
          </inertia>
        </inertial>
        <visual name="chassis_vis">
          <geometry><box><size>0.27 0.1205 0.002</size></box></geometry>
          <material><ambient>1 0 0 1</ambient><diffuse>1 0 0 1</diffuse></material>
        </visual>
        <collision name="chassis_col">
          <geometry><box><size>0.27 0.1205 0.002</size></box></geometry>
        </collision>
      </link>

      <link name="fl_steer_link">
        <pose>0.095 0.076 -0.018408 0 0 0</pose>
        <inertial><mass>0.01</mass><inertia><ixx>1e-5</ixx><ixy>0</ixy><ixz>0</ixz><iyy>1e-5</iyy><iyz>0</iyz><izz>1e-5</izz></inertia></inertial>
      </link>
      <link name="fl_wheel_link">
        <pose>0.095 0.076 -0.018408 1.5708 0 0</pose>
        <inertial>
          <pose>6.2319E-05 -0.005746 2.9859E-05 0 0 0</pose>
          <mass>0.03787</mass>
          <inertia><ixx>3.6767E-06</ixx><ixy>-1.4218E-09</ixy><ixz>-1.2032E-08</ixz><iyy>5.8100E-06</iyy><iyz>1.7232E-09</iyz><izz>3.6793E-06</izz></inertia>
        </inertial>
        <visual name="v"><geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry></visual>
        <collision name="c">
          <geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry>
          <surface><friction><ode><mu>1.5</mu><mu2>1.5</mu2></ode></friction></surface>
        </collision>
      </link>
      <joint name="front_left_steer_joint" type="revolute">
        <parent>base_link</parent><child>fl_steer_link</child>
        <axis><xyz>0 0 1</xyz><limit><lower>-0.6</lower><upper>0.6</upper><effort>1e6</effort><velocity>10</velocity></limit></axis>
      </joint>
      <joint name="front_left_wheel_joint" type="revolute">
        <parent>fl_steer_link</parent><child>fl_wheel_link</child>
        <axis><xyz>0 0 1</xyz><limit><effort>1e6</effort><velocity>100</velocity></limit></axis>
      </joint>

      <link name="fr_steer_link">
        <pose>0.095 -0.076 -0.018408 0 0 0</pose>
        <inertial><mass>0.01</mass><inertia><ixx>1e-5</ixx><ixy>0</ixy><ixz>0</ixz><iyy>1e-5</iyy><iyz>0</iyz><izz>1e-5</izz></inertia></inertial>
      </link>
      <link name="fr_wheel_link">
        <pose>0.095 -0.076 -0.018408 1.5708 0 0</pose>
        <inertial>
          <pose>6.2319E-05 -0.005746 2.9859E-05 0 0 0</pose>
          <mass>0.03787</mass>
          <inertia><ixx>3.6767E-06</ixx><ixy>-1.4218E-09</ixy><ixz>-1.2032E-08</ixz><iyy>5.8100E-06</iyy><iyz>1.7232E-09</iyz><izz>3.6793E-06</izz></inertia>
        </inertial>
        <visual name="v"><geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry></visual>
        <collision name="c">
          <geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry>
          <surface><friction><ode><mu>1.5</mu><mu2>1.5</mu2></ode></friction></surface>
        </collision>
      </link>
      <joint name="front_right_steer_joint" type="revolute">
        <parent>base_link</parent><child>fr_steer_link</child>
        <axis><xyz>0 0 1</xyz><limit><lower>-0.6</lower><upper>0.6</upper><effort>1e6</effort><velocity>10</velocity></limit></axis>
      </joint>
      <joint name="front_right_wheel_joint" type="revolute">
        <parent>fr_steer_link</parent><child>fr_wheel_link</child>
        <axis><xyz>0 0 1</xyz><limit><effort>1e6</effort><velocity>100</velocity></limit></axis>
      </joint>

      <link name="rl_wheel_link">
        <pose>-0.095 0.076 -0.018408 1.5708 0 0</pose>
        <inertial>
          <pose>6.2319E-05 -0.005746 2.9859E-05 0 0 0</pose>
          <mass>0.03787</mass>
          <inertia><ixx>3.6767E-06</ixx><ixy>-1.4218E-09</ixy><ixz>-1.2032E-08</ixz><iyy>5.8100E-06</iyy><iyz>1.7232E-09</iyz><izz>3.6793E-06</izz></inertia>
        </inertial>
        <visual name="v"><geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry></visual>
        <collision name="c">
          <geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry>
          <surface><friction><ode><mu>1.5</mu><mu2>1.5</mu2></ode></friction></surface>
        </collision>
      </link>
      <joint name="rear_left_wheel_joint" type="revolute">
        <parent>base_link</parent><child>rl_wheel_link</child>
        <axis><xyz>0 0 1</xyz><limit><effort>1e6</effort><velocity>100</velocity></limit></axis>
      </joint>

      <link name="rr_wheel_link">
        <pose>-0.095 -0.076 -0.018408 1.5708 0 0</pose>
        <inertial>
          <pose>6.2319E-05 -0.005746 2.9859E-05 0 0 0</pose>
          <mass>0.03787</mass>
          <inertia><ixx>3.6767E-06</ixx><ixy>-1.4218E-09</ixy><ixz>-1.2032E-08</ixz><iyy>5.8100E-06</iyy><iyz>1.7232E-09</iyz><izz>3.6793E-06</izz></inertia>
        </inertial>
        <visual name="v"><geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry></visual>
        <collision name="c">
          <geometry><cylinder><radius>0.0375</radius><length>0.03</length></cylinder></geometry>
          <surface><friction><ode><mu>1.5</mu><mu2>1.5</mu2></ode></friction></surface>
        </collision>
      </link>
      <joint name="rear_right_wheel_joint" type="revolute">
        <parent>base_link</parent><child>rr_wheel_link</child>
        <axis><xyz>0 0 1</xyz><limit><effort>1e6</effort><velocity>100</velocity></limit></axis>
      </joint>

      <plugin filename="gz-sim-ackermann-steering-system" name="gz::sim::systems::AckermannSteering">
        <left_steering_joint>front_left_steer_joint</left_steering_joint>
        <right_steering_joint>front_right_steer_joint</right_steering_joint>
        <left_joint>front_left_wheel_joint</left_joint>
        <left_joint>rear_left_wheel_joint</left_joint>
        <right_joint>front_right_wheel_joint</right_joint>
        <right_joint>rear_right_wheel_joint</right_joint>
        <wheel_base>0.19</wheel_base>
        <wheel_separation>0.152</wheel_separation>
        <wheel_radius>0.0375</wheel_radius>
        <topic>/cmd_vel</topic>
        <odom_topic>/odometry</odom_topic>
        <tf_topic>/tf</tf_topic>
      </plugin>

    </model>
  </world>
</sdf>